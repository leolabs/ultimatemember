jQuery(document).ready(function(){jQuery(".um-form").each(function(){var e,i=jQuery(this),n=[],a={},t={};function c(e){switch(o(e)){case"text":case"number":case"date":case"textarea":case"select":case"multiselect":case"radio":case"checkbox":return e.find("input,textarea,select")}return""}function o(e){var i="",n=e.attr("class");return jQuery.each(n.split(" "),function(e,n){-1!=n.indexOf("um-field-type")&&(i=n.split("_")[1])}),i}function r(e,i,n){var a,t=!1;n=!!n;for(a in i)if(n&&i[a]===e||!n&&i[a]==e){t=!0;break}return t}function u(e,i){var n=e.parents(".um-field[data-key]").data("key"),t=a[n],c=function(e){return um_live_field=e.parents(".um-field").data("key"),um_live_value=e.val(),e.is(":checkbox")&&(um_live_value="",e.parents(".um-field").find("input:checked").length>1?e.parents(".um-field").find("input:checked").each(function(){um_live_value=um_live_value+jQuery(this).val()+" "}):e.parents(".um-field").find("input:checked").length>=1&&(um_live_value=e.parents(".um-field").find("input:checked").val())),e.is(":radio")&&(um_live_value=e.parents(".um-field").find("input[type=radio]:checked").val()),um_live_value}(e),u={},s={},l={};jQuery.each(t,function(e,i){void 0===s[i.owner]&&(s[i.owner]=[],l[i.owner]={}),s[i.owner].push(i.value),l[i.owner]=i}),jQuery.each(t,function(i,n){void 0===u[n.owner]&&(u[n.owner]={}),"empty"==n.operator&&(!c||""==c&&r(c,s[n.owner])?u[n.owner][i]=!0:u[n.owner][i]=!1),"not empty"==n.operator&&(c&&""!=c&&!r(c,s[n.owner])?u[n.owner][i]=!0:u[n.owner][i]=!1),"equals to"==n.operator&&(n.value==c&&r(c,s[n.owner])?u[n.owner][i]=!0:u[n.owner][i]=!1),"not equals"==n.operator&&(jQuery.isNumeric(n.value)&&parseInt(c)!=parseInt(n.value)&&c&&!r(c,s[n.owner])?u[n.owner][i]=!0:n.value==c||r(c,s[n.owner])?u[n.owner][i]=!1:u[n.owner][i]=!0),"greater than"==n.operator&&(jQuery.isNumeric(n.value)&&parseInt(c)>parseInt(n.value)?u[n.owner][i]=!0:u[n.owner][i]=!1),"less than"==n.operator&&(jQuery.isNumeric(n.value)&&parseInt(c)<parseInt(n.value)?u[n.owner][i]=!0:u[n.owner][i]=!1),"contains"==n.operator&&("multiselect"==o(e.parents(".um-field[data-key]"))?c&&c.indexOf(n.value)>=0&&r(n.value,c)?u[n.owner][i]=!0:u[n.owner][i]=!1:"checkbox"==o(e.parents(".um-field[data-key]"))?c&&c.indexOf(n.value)>=0?u[n.owner][i]=!0:u[n.owner][i]=!1:c&&c.indexOf(n.value)>=0&&r(c,s[n.owner])?u[n.owner][i]=!0:u[n.owner][i]=!1)}),jQuery.each(u,function(i,n){r(!0,n)?d(e,l[i],!0):d(e,l[i],!1)}),e.trigger("um_fields_change")}function d(e,n,a){var t=i.find('.um-field[data-key="'+n.owner+'"]');"show"==n.action&&a&&(t.show(),h(t),s(t)),"show"!=n.action||a||(t.hide(),f(t)),"hide"==n.action&&a&&(t.hide(),f(t)),"hide"!=n.action||a||(t.show(),h(t),s(t)),e.removeClass("um-field-has-changed")}function s(e){var i=o(e),n=e.data("key"),a=t[n];switch(i){case"text":case"number":case"date":case"textarea":e.find("input:text,input[type=number],textareas").val(a.value);break;case"select":e.find("select").find("option").prop("selected",!1),e.find("select").val(a.value),e.find("select").trigger("change");break;case"multiselect":e.find("select").find("option").prop("selected",!1),jQuery.each(a.value,function(i,n){e.find("select").find('option[value="'+n+'"]').attr("selected",!0)}),e.find("select").trigger("change");break;case"checkbox":if(e.find("input[type=checkbox]:checked").length>=1)if(e.find("input[type=checkbox]:checked").removeAttr("checked"),e.find("span.um-field-checkbox-state i").removeClass("um-icon-android-checkbox-outline"),e.find("span.um-field-checkbox-state i").addClass("um-icon-android-checkbox-outline-blank"),e.find(".um-field-checkbox.active").removeClass("active"),jQuery.isArray(a.value))jQuery.each(a.value,function(i,n){var a=e.find('input[type=checkbox][value="'+n+'"]');a.attr("checked",!0),a.closest(".um-field-checkbox").find("i").removeClass("um-icon-android-checkbox-outline-blank"),a.closest(".um-field-checkbox").find("i").addClass("um-icon-android-checkbox-outline"),a.closest(".um-field-checkbox").addClass("active")});else{var r=e.find('input[type=checkbox][value="'+a.value+'"]');r.attr("checked",!0),r.closest(".um-field-checkbox").find("i").removeClass("um-icon-android-checkbox-outline-blank"),r.closest(".um-field-checkbox").find("i").addClass("um-icon-android-checkbox-outline"),r.closest(".um-field-checkbox").addClass("active")}break;case"radio":e.find("input[type=radio]:checked").length>=1&&setTimeout(function(){e.find("input[type=radio]:checked").removeAttr("checked"),e.find("span.um-field-radio-state i").removeClass("um-icon-android-radio-button-on"),e.find("span.um-field-radio-state i").addClass("um-icon-android-radio-button-off"),e.find(".um-field-radio.active").removeClass("active");var i=e.find("input[type=radio][value='"+a.value+"']");i.attr("checked",!0),i.closest(".um-field-radio").find("i").removeClass("um-icon-android-radio-button-off"),i.closest(".um-field-radio").find("i").addClass("um-icon-android-radio-button-on"),i.closest(".um-field-radio").addClass("active")},100)}if(!e.hasClass("um-field-has-changed")){var u=c(e);"radio"!=i&&"checkbox"!=i||(u=u.find(":checked")),u&&(u.trigger("change"),e.addClass("um-field-has-changed"))}}function l(){jQuery.each(a,function(e,n){(i.find('.um-field[data-key="'+e+'"]:hidden').length>=1||"none"===i.find('.um-field[data-key="'+e+'"]').css("display"))&&jQuery.each(n,function(e,n){i.find('.um-field[data-key="'+n.owner+'"]').hide()})})}function f(e){void 0!==jQuery.browser&&jQuery.browser.msie&&e.css({visibility:"hidden"})}function h(e){void 0!==jQuery.browser&&jQuery.browser.msie&&e.css({visibility:"visible"})}i.on("change",".um-field select, .um-field input[type=radio], .um-field input[type=checkbox]",function(){u(jQuery(this))}),i.on("input change",".um-field input[type=text]",function(){u(jQuery(this))}),i.on("input change",".um-field input[type=password]",function(){u(jQuery(this))}),i.on("um_fields_change",function(){l(),l()}),e=[],i.find(".um-field[data-key]").each(function(){var i=jQuery(this).data("key");e.push(i);var a={};jQuery.each(jQuery(this)[0].attributes,function(e,i){if(-1!=i.name.indexOf("data-cond")){var n=i.name.slice(10),t=n.substring(1,0),c=n.slice(2);void 0===a[t]&&(a[t]={}),a[t][c]=i.value}}),jQuery.each(a,function(e,a){var t={field:{owner:i,action:a.action,parent:a.field,operator:a.operator,value:a.value,condition:{owner:i,action:a.action,operator:a.operator,value:a.value}}};n.push(t)}),t[jQuery(this).data("key")]=function(e){var i="",n=o(e);switch(n){case"text":case"number":case"date":case"textarea":case"select":i=e.find("input:text,input[type=number],textarea,select").val();break;case"multiselect":i=e.find("select").val();break;case"radio":e.find("input[type=radio]:checked").length>=1&&(i=e.find("input[type=radio]:checked").val());break;case"checkbox":e.find("input[type=checkbox]:checked").length>=1&&(e.find("input[type=checkbox]:checked").length>1?e.find("input[type=checkbox]:checked").each(function(){i=i+jQuery(this).val()+" "}):i=e.find("input[type=checkbox]:checked").val())}return{type:n,value:i}}(jQuery(this))}),jQuery.each(e,function(e,i){a[i]=function(e){var i=[];return jQuery.each(n,function(n,a){a.field.parent==e&&i.push(a.field.condition)}),i}(i)}),i.find(".um-field[data-key]:visible").each(function(){var e=c(jQuery(this));void 0!==e.trigger&&e.trigger("change")})})});